<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="Start" href="index.html">
<link rel="previous" href="Command.html">
<link rel="next" href="Main.html">
<link rel="Up" href="index.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of exceptions" rel=Appendix href="index_exceptions.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Board" rel="Chapter" href="Board.html">
<link title="Command" rel="Chapter" href="Command.html">
<link title="State" rel="Chapter" href="State.html">
<link title="Main" rel="Chapter" href="Main.html">
<link title="Author" rel="Chapter" href="Author.html">
<link title="Translate" rel="Chapter" href="Translate.html">
<link title="Piece" rel="Chapter" href="Piece.html">
<link title="Move" rel="Chapter" href="Move.html"><title>State</title>
</head>
<body>
<div class="navbar"><a class="pre" href="Command.html" title="Command">Previous</a>
&nbsp;<a class="up" href="index.html" title="Index">Up</a>
&nbsp;<a class="post" href="Main.html" title="Main">Next</a>
</div>
<h1>Module <a href="type_State.html">State</a></h1>

<pre><span id="MODULEState"><span class="keyword">module</span> State</span>: <code class="code">sig</code> <a href="State.html">..</a> <code class="code">end</code></pre><div class="info module top">
<div class="info-desc">
<p>Representation of dynamic chess game state.</p>
</div>
</div>
<hr width="100%">

<pre><span id="TYPEt"><span class="keyword">type</span> <code class="type"></code>t</span> </pre>
<div class="info ">
<div class="info-desc">
<p>The abstract type of values representing the game state.</p>
</div>
</div>


<pre><code><span id="TYPEresult"><span class="keyword">type</span> <code class="type"></code>result</span> = </code></pre><table class="typetable">
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTresult.Illegal"><span class="constructor">Illegal</span></span></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTresult.Legal"><span class="constructor">Legal</span></span> <span class="keyword">of</span> <code class="type"><a href="State.html#TYPEt">t</a></code></code></td>

</tr></table>

<div class="info ">
<div class="info-desc">
<p>The result of executing a command, defined as Illegal or Legal st.</p>
</div>
</div>


<pre><span id="EXCEPTIONInvalidMove"><span class="keyword">exception</span> InvalidMove</span></pre>
<div class="info ">
<div class="info-desc">
<p>Raised if a move is invalid.</p>
</div>
</div>

<pre><span id="EXCEPTIONPieceNotFound"><span class="keyword">exception</span> PieceNotFound</span></pre>
<div class="info ">
<div class="info-desc">
<p>Raised if a piece cannot be found.</p>
</div>
</div>

<pre><span id="VALinit_state"><span class="keyword">val</span> init_state</span> : <code class="type"><a href="State.html#TYPEt">t</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">init_state</code> is the initial state of the game.</p>
</div>
</div>

<pre><span id="VALset_state"><span class="keyword">val</span> set_state</span> : <code class="type"><a href="Board.html#TYPEt">Board.t</a> -><br>       <a href="Piece.html#TYPEteam">Piece.team</a> -><br>       string -> (<a href="Piece.html#TYPEposition">Piece.position</a> * <a href="Piece.html#TYPEposition">Piece.position</a>) list -> bool -> <a href="State.html#TYPEt">t</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">set_state</code> returns a state with the specified inputs.</p>
</div>
</div>

<pre><span id="VALget_board"><span class="keyword">val</span> get_board</span> : <code class="type"><a href="State.html#TYPEt">t</a> -> <a href="Board.html#TYPEt">Board.t</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">get_board st</code> is the current board of pieces.</p>
</div>
</div>

<pre><span id="VALget_turn"><span class="keyword">val</span> get_turn</span> : <code class="type"><a href="State.html#TYPEt">t</a> -> <a href="Piece.html#TYPEteam">Piece.team</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">get_turn st</code> is the team who's current turn it is to move.</p>
</div>
</div>

<pre><span id="VALget_last_update"><span class="keyword">val</span> get_last_update</span> : <code class="type"><a href="State.html#TYPEt">t</a> -> string</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">get_last_update st</code> is a string meant to denote any feedback for the gui.
    ie. If the player successfully moves a piece from (a, 6) to (a, 7), 
    <code class="code">last_update</code> will be set as "Moved (a, 6) to (a, 7)."</p>
</div>
</div>

<pre><span id="VALget_moves"><span class="keyword">val</span> get_moves</span> : <code class="type"><a href="State.html#TYPEt">t</a> -> (<a href="Piece.html#TYPEposition">Piece.position</a> * <a href="Piece.html#TYPEposition">Piece.position</a>) list</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">get_moves st</code> is the list of moves made in <code class="code">st</code>, such that for all 
    (pi1, pi2), pi1 represents the original position of the piece, and pi2 is 
    the resulting position. Empty list if no piece has been moved yet.</p>
</div>
</div>

<pre><span id="VALis_in_promotion"><span class="keyword">val</span> is_in_promotion</span> : <code class="type"><a href="State.html#TYPEt">t</a> -> bool</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">is_in_promotion st</code> is true if <code class="code">st</code> is currently in a piece promotion.
    Otherwise, is false.</p>
</div>
</div>

<pre><span id="VALcmp_states"><span class="keyword">val</span> cmp_states</span> : <code class="type"><a href="State.html#TYPEt">t</a> -> <a href="State.html#TYPEt">t</a> -> bool</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">compare_states st1 st2</code> returns true if st1 and st2 are equal. Otherwise,
    returns false.</p>
</div>
</div>

<pre><span id="VALset_update"><span class="keyword">val</span> set_update</span> : <code class="type"><a href="State.html#TYPEt">t</a> -> string -> <a href="State.html#TYPEt">t</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">set_update st str</code> returns <code class="code">st</code> with <code class="code">str</code> as its last_update.</p>
</div>
</div>

<pre><span id="VALset_board"><span class="keyword">val</span> set_board</span> : <code class="type"><a href="State.html#TYPEt">t</a> -> <a href="Board.html#TYPEt">Board.t</a> -> <a href="State.html#TYPEt">t</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">set_board st bd</code> returns <code class="code">st</code> with <code class="code">bd</code> as its board.</p>
</div>
</div>

<pre><span id="VALcheck_piece"><span class="keyword">val</span> check_piece</span> : <code class="type"><a href="State.html#TYPEt">t</a> -> <a href="Piece.html#TYPEteam">Piece.team</a> -> <a href="Piece.html#TYPEpiece">Piece.piece</a> option</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">check_piece st team</code> is Some p if p is a piece that is causing the check 
    status of <code class="code">team</code> (ie. there exists an opposing piece of <code class="code">team</code> that can
    capture <code class="code">team</code>'s king with a direct move. If no check status is found, is
    None.</p>
</div>
</div>

<pre><span id="VALis_check"><span class="keyword">val</span> is_check</span> : <code class="type"><a href="State.html#TYPEt">t</a> -> <a href="Piece.html#TYPEteam">Piece.team</a> -> bool</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">is_check st team</code> true if <code class="code">team</code> is in check in <code class="code">st</code>.</p>
</div>
</div>

<pre><span id="VALis_checkmate"><span class="keyword">val</span> is_checkmate</span> : <code class="type"><a href="State.html#TYPEt">t</a> -><br>       <a href="Piece.html#TYPEteam">Piece.team</a> -><br>       (<a href="State.html#TYPEt">t</a> -> <a href="Piece.html#TYPEposition">Piece.position</a> -> <a href="Piece.html#TYPEposition">Piece.position</a> -> <a href="State.html#TYPEresult">result</a>) -> bool</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">is_checkmate st team move</code> returns true if <code class="code">team</code> is in checkmate in <code class="code">st</code>. 
    Otherwise, returns false.
    Checkmate is defined as being in check but not being able to make a move 
    that will take you out of check.</p>
</div>
</div>

<pre><span id="VALmove"><span class="keyword">val</span> move</span> : <code class="type"><a href="State.html#TYPEt">t</a> -> <a href="Piece.html#TYPEposition">Piece.position</a> -> <a href="Piece.html#TYPEposition">Piece.position</a> -> <a href="State.html#TYPEresult">result</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">move st pos1 pos2</code> is <code class="code">Legal t'</code> if <code class="code">pos1</code> is the position of piece <code class="code">p1</code> 
    belonging to the current turn's player, and moving to position <code class="code">pos2</code> is a 
    valid move or kill for <code class="code">p1</code>, where <code class="code">t'</code> is a new state reflecting such 
    change. Otherwise, is <code class="code">Illegal</code>.</p>
</div>
</div>

<pre><span id="VALcastle"><span class="keyword">val</span> castle</span> : <code class="type"><a href="State.html#TYPEt">t</a> -> <a href="Piece.html#TYPEposition">Piece.position</a> -> <a href="Piece.html#TYPEposition">Piece.position</a> -> <a href="State.html#TYPEresult">result</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">castle st pos1 pos2</code> is <code class="code">Legal t'</code> if the pieces at <code class="code">pos1</code> and <code class="code">pos2</code> can 
    castle in <code class="code">st</code>, and <code class="code">t'</code> reflects such a change. Otherwise, is <code class="code">Illegal</code>.</p>
</div>
</div>

<pre><span id="VALcount_graveyard_piece"><span class="keyword">val</span> count_graveyard_piece</span> : <code class="type"><a href="Piece.html#TYPErank">Piece.rank</a> -> <a href="Piece.html#TYPEteam">Piece.team</a> -> <a href="State.html#TYPEt">t</a> -> int</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">count_graveyard_piece r team st</code> returns the number of pieces that are
    captured in state <code class="code">st</code> that are of rank <code class="code">r</code> and belong to team <code class="code">team</code>.</p>
</div>
</div>

<pre><span id="VALcan_promote"><span class="keyword">val</span> can_promote</span> : <code class="type"><a href="Piece.html#TYPEposition">Piece.position</a> -> <a href="State.html#TYPEt">t</a> -> bool</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">can_promote pos team</code> is true if a piece at <code class="code">pos</code> in state <code class="code">t</code> is a 
    pawn, and has reached the opposite end of the board. Otherwise, is false.</p>
</div>
</div>

<pre><span id="VALpromote"><span class="keyword">val</span> promote</span> : <code class="type">(<a href="Piece.html#TYPEposition">Piece.position</a> * <a href="Piece.html#TYPEposition">Piece.position</a>) list -><br>       <a href="Piece.html#TYPErank">Piece.rank</a> -> <a href="State.html#TYPEt">t</a> -> <a href="State.html#TYPEresult">result</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">promote m rank st</code> checks if a pawn at <code class="code">pos</code> (where (_, <code class="code">pos</code>)::t is <code class="code">m</code>) 
    of the current team in <code class="code">st</code> has moved to the end of the board, and if so, 
    returns <code class="code">Legal st'</code> with the pawn promoted to <code class="code">rank</code>. 
    Otherwise, returns <code class="code">Illegal</code>.
    Raises: PieceNotFound if no prior moves made.</p>
</div>
</div>
</body></html>
